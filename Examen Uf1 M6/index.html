<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
    <style>
        
        .card {
            border-radius: 100px;
            width: 200px;
            height: 200px;
            overflow: hidden; /* Hace que el texto no salga del circulo*/
        }

        .card-body {
            display: flex;
            align-items: center;
            justify-content: center;
            flex-direction: column;
            height: 100%;
            padding: 10px;
            overflow-y: auto; 
        }

        .card:hover {
            background-color: rgb(228, 226, 226);
        }

        .pedidos-container {
            max-height: 120px; 
            overflow-y: auto; 
            width: 100%; 
            
            
        }
        button{
            border: none;
            background-color: none;
            
        }

    </style>
</head>
<body class="bg-dark">

    <main class="container-fluid">
        <h1 class="text-center text-white pt-3 pb-3">La taberna de Gragas</h1>
        <div class="container-fluid row">
            <div id="listadecerveza" class="col-4 me-2">
                
                <table class="table table-striped table-hover table-bordered rounded-4 bg-danger text-white"><h2 class="text-white bg-success text-center pb-2 pt-2 rounded-3">Lista de Cervezas</h2>
                    <thead class="table-success">
                        <tr>
                            <th scope="col">Nombre</th>
                            <th scope="col">Precio</th>
                            <th scope="col">Graduación</th>
                            <th scope="col">Foto</th>
                        </tr>
                    </thead>
                    <tbody>
                        <!-- Las filas se llenarán dinámicamente -->
                    </tbody>
                </table>
            </div>
    
            <div class="col">
                <button type="button" id="mostrarocultar" class="btn btn-secondary mb-2">Mostrar/ocultar lista de cervezas</button>
                <div class="bg-secondary-subtle rounded-3">
                    <div class="container shadow-sm p-3 ">
                        <div class="row mb-3 mt-3 bg-white rounded-3">
                            <div class="col mb-3 mt-3">
                                <select id="cerveza" class="form-select">
                                    <option selected>Estrella Damm</option>
                                    <!----inyecta las opciones-->
                                </select>
                            </div>
                            <div class="col mb-3 mt-3">
                                <select id="cantidad" class="form-select">
                                    <option selected>1</option>
                                    <option>2</option>
                                    <option>3</option>
                                    <option>4</option>
                                    <option>5</option>
                                </select>
                            </div>
                            <div class="col mb-3 mt-3">
                                <select id="mesa" class="form-select">
                                    <option value="mesa1">Mesa 1</option>
                                    <option value="mesa2">Mesa 2</option>
                                    <option value="mesa3">Mesa 3</option>
                                    <option value="mesa4">Mesa 4</option>
                                    <option value="mesa5">Mesa 5</option>
                                </select>
                            </div>
                            <div class="col mb-3 mt-3">
                                <button id="hacerpedido" type="button" class="btn btn-primary w-100">Hacer Pedido</button>
                            </div>
                        </div>
    
                        <div class="row d-flex justify-content-center">
                            <div class="col" id>
                                <button>
                                <div class="card shadow-sm">
                                    
                                    <div class="card-body text-center mesa" id="mesa1">
                                        <h5 class="card-title mb-1">Mesa 1</h5>
                                        <div class="pedidos-container" id="pedidosMesa1"></div>
                                    </div>
                                </div>
                                </button>
                            </div>
                            <div class="col">
                                <button>
                                <div class="card shadow-sm">
                                    <div class="card-body text-center mesa" id="mesa2">
                                        <h5 class="card-title mb-1">Mesa 2</h5>
                                        <div class="pedidos-container" id="pedidosMesa2"></div>
                                    </div>
                                </div>
                                </button>
                            </div>
                            <div class="col">
                                <button>
                                <div class="card shadow-sm">
                                    <div class="card-body text-center mesa" id="mesa3">
                                        <h5 class="card-title mb-1">Mesa 3</h5>
                                        <div class="pedidos-container" id="pedidosMesa3"></div>
                                    </div>
                                </div>
                                </button>
                            </div>
                            <div class="col">
                                <button>
                                <div class="card shadow-sm">
                                    <div class="card-body text-center mesa" id="mesa4">
                                        <h5 class="card-title mb-1">Mesa 4</h5>
                                        <div class="pedidos-container" id="pedidosMesa4"></div>
                                    </div>
                                </div>
                                </button>
                            </div>
                            
                            <div class="col">
                                <button>
                                <div class="card shadow-sm">
                                    <div class="card-body text-center mesa" id="mesa5" t>
                                        <h5 class="card-title mb-1">Mesa 5</h5>
                                        <div class="pedidos-container" id="pedidosMesa5"></div>
                                    </div>
                                    
                                </div>
                                </button>
                            </div>
                            
                        </div>
                        <h2 class="pt-4">Pedidos de la Mesa</h2>
                        <table class="table">
                        
                    <tr>
                        <th scope="row" class="-2">Cerveza</th>
                        <th class="ms-2">Cantidad</th>
                        <th class="me-2">Precio Unitario</th>
                        <th class="me-2">Precio</th>
                    </tr>
                    <tbody id="tablainyectar">
                    <!-------generacion de tabla-->
                        </tbody>
                        <tr>
                        <th scope="row" colspan="3">Total acumulado</th>
                        <th id="totaldepedido"></th>
                        </tr>
                        </table>
                    </div>
                </div>
            </div>
        </div>
    </main>

     
    









    <script>
        // Array de cervezas 
const cervezas = [
    {
        nombre: "Estrella Damm",
        precio: 3.00,
        graduacion: "5.4%",
        foto: "https://bacidangelo-shop.com/wp-content/uploads/2023/05/7-1.jpg"
    },
    {
        nombre: "Mahou Cinco Estrellas",
        precio: 3.20,
        graduacion: "5.5%",
        foto: "https://www.mahou-sanmiguel.com/dw/image/v2/BBTJ_PRD/on/demandware.static/-/Sites-lasolana-master-catalog/default/dw3355dd61/images/hi-res/IS2356-5.jpg?sw=210&sh=210&sm=fit&q=70"
    },
    {
        nombre: "Alhambra Reserva 1925",
        precio: 3.50,
        graduacion: "6.4%",
        foto: "https://escerveza.com/cdn/shop/products/collection-title-escerveza-3-21391384084580.jpg?v=1697406499"
    },
    {
        nombre: "Heineken",
        precio: 3.00,
        graduacion: "5.0%",
        foto: "https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcRLDgA3_-6YOkiXDzfGPByHYlYxrh1sY6rYRA&s"
    },
    {
        nombre: "Ambar Especial",
        precio: 2.80,
        graduacion: "5.2%",
        foto: "https://m.media-amazon.com/images/I/61nDXISNTEL.jpg"
    }
 ];

// Llenar el selector de cervezas y la tabla al cargar el script
const selectorCerveza = document.getElementById('cerveza');
const tablaCerveza = document.getElementById('listadecerveza').getElementsByTagName('tbody')[0];

let opcionesSelector = '';
let filasTabla = '';

// Llenar el selector de cervezas y las filas de la tabla
for (let i = 0; i < cervezas.length; i++) {
    //Aumenta las opciones del selector de cerveza
    opcionesSelector += `<option>${cervezas[i].nombre}</option>`;
    // Lista de cerveza
    filasTabla += `
        <tr>
            <td>${cervezas[i].nombre}</td>
            <td>${cervezas[i].precio.toFixed(2)} €</td>
            <td>${cervezas[i].graduacion}</td>
            <td><img src="${cervezas[i].foto}" alt="${cervezas[i].nombre}" class="bg-success" style="width: 100px; height: 100px;"></td>
        </tr>
    `;
}

// Inyecta el HTML generado a los elementos 
selectorCerveza.innerHTML = opcionesSelector;
tablaCerveza.innerHTML = filasTabla;

 // Mostrar/Ocultar la lista de cervezas
 const listaCerveza = document.getElementById('listadecerveza');
 const botonMostrarOcultar = document.getElementById('mostrarocultar');

 botonMostrarOcultar.addEventListener('click', function () {
 //Primero verifica si esta en display block o si es una cadena oculta si lo esta lo oculta y cambia el texto a mostrar y al darle de nuevo pasara en viceversa
     if (listaCerveza.style.display === "block" || listaCerveza.style.display === "") {
         listaCerveza.style.display = "none";
         botonMostrarOcultar.textContent = "Mostrar lista de cervezas";
         console.log("Se oculto la tabla");
     } else {
         listaCerveza.style.display = "block";
         
         botonMostrarOcultar.textContent = "Ocultar lista de cervezas";
         console.log("Se muestra la tabla");
     }
 });

 // Hacer un pedido
 //Captura el boton
 const btnHacerPedido = document.getElementById("hacerpedido");

 btnHacerPedido.addEventListener("click", function () {
    //al hacer clic en el boton capta el valor de las opciones
     const cervezaPedida = document.getElementById("cerveza").value;
     const cantidadPedida = document.getElementById("cantidad").value;
     const mesaPedida = document.getElementById("mesa").value;
        //compara el valor de la  mesa que es igual al id de la
     const mesa = document.querySelector(`#${mesaPedida}`);
     //Inyecta el texto a la mesa indicada
     mesa.innerHTML += `<p style="font-size:13px">${cervezaPedida} x${cantidadPedida}</p>`;


     const modalmesa1 = document.getElementById("mesa1");
const modalmesa2 = document.getElementById("mesa2");
const modalmesa3 = document.getElementById("mesa3");
const modalmesa4 = document.getElementById("mesa4");
const modalmesa5 = document.getElementById("mesa5");

modalmesa1.addEventListener('click', function() {
    mostratabla();
})
modalmesa2.addEventListener('click', function() {
    mostratabla();
})
modalmesa3.addEventListener('click', function() {
    mostratabla();
})
modalmesa4.addEventListener('click', function() {
    mostratabla();
})
modalmesa5.addEventListener('click', function() {
    mostratabla();
})
modalmesa6.addEventListener('click', function() {
    mostratabla();
})
 });







// Mostrar tabla

  
function mostratabla(){
    const cervezaPedida = document.getElementById("cerveza").value;
    const cantidadPedida = parseInt(document.getElementById("cantidad").value);
    const mesaPedida = document.getElementById("mesa").value;

    let valor = 0;
    let total = 0;
    let totaldepedido = 0;

    for (let i = 0; i < cervezas.length; i++) {
        if (cervezas[i].nombre === cervezaPedida) {
            valor = cervezas[i].precio;
            total = cantidadPedida * valor;
            totaldepedido += totaldepedido + total;
            break;
        }
    }

    const listatabla = `
        <tr>
            <td class="pe-4">${cervezaPedida}</td>
            <td class="pe-4">${cantidadPedida}</td>
            <td class="pe-4">${valor.toFixed(2)}</td>
            <td class="pe-4">${total.toFixed(2)}</td>
        </tr>`;

    document.querySelector('#tablainyectar').innerHTML = listatabla;
    
    document.querySelector('#totaldepedido').innerHTML = totaldepedido.toFixed(2);
};


    </script>
    
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>

</body>
</html>